<view class="page">
  <view class="hero">
    <text class="title">财务管理</text>
  </view>

  <view class="section summary">
    <view class="row">
      <view class="col">
        <text class="label">本月支出</text>
        <text class="value red">￥{{summary.out}}</text>
      </view>
      <view class="col">
        <text class="label">本月收入</text>
        <text class="value">￥{{summary.in}}</text>
      </view>
      <view class="col">
        <text class="label">预算剩余</text>
        <text class="value green">￥{{summary.budgetLeft}}</text>
      </view>
    </view>
  </view>

  <view class="section">
    <text class="section-title">本周动态</text>
    <block wx:if="{{recent && recent.length}}">
      <block wx:for="{{recent}}" wx:key="id">
        <view class="recent-item">
          <view class="recent-left">
            <text class="recent-cat">{{item.category}}</text>
            <text class="recent-note">{{item.date}}</text>
          </view>
          <text class="recent-amount {{item.type === '支出' ? 'red' : 'green'}}">{{item.formatted}}</text>
        </view>
      </block>
    </block>
    <block wx:else>
      <text class="small-note">本周暂无交易</text>
    </block>
  </view>

  <view class="section">
    <text class="section-title">最近 30 天趋势</text>
    <canvas canvas-id="trendCanvas" style="width: 100%; height: 140px; display: block;"></canvas>
  </view>

  <!-- custom tabbar -->
  <custom-tabbar/>


  <view class="grid">
    <view class="card" bindtap="goBills">
      <text class="card-title">账单管理</text>
    </view>
    <view class="card" bindtap="goBudget">
      <text class="card-title">预算管理</text>
    </view>
  </view>
</view>
