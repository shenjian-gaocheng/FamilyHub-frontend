<view class="page">
  <view class="hero">
    <view class="hero-top">
      <text class="time-text">{{month}}æœˆ ç¬¬{{weekOfYear}}å‘¨</text>
      <view class="hero-actions">
        <button class="icon-btn primary" bindtap="onAdd">æ·»åŠ æ—¥ç¨‹</button>
      </view>
    </view>
    <text class="title">è¯¾ç¨‹è¡¨</text>
  </view>

  <scroll-view class="date-row" scroll-x>
    <view class="date-item" wx:for="{{dates}}" wx:key="day" bindtap="onSelectDate" data-day="{{item.day}}">
      <text class="week">{{item.label}}</text>
      <view class="date {{item.day === selectedDay ? 'active' : ''}}">
        <text class="num">{{item.day}}</text>
      </view>
    </view>
  </scroll-view>

  <view class="timeline">
    <block wx:for="{{events}}" wx:key="id" wx:for-index="idx">
      <view class="time-slot">
        <text class="slot-time">{{item.start}} - {{item.end}}</text>
      </view>
      <view class="event-pill" bindtap="onEventTap" data-idx="{{idx}}">
        <text class="event-title">{{item.title}}</text>
        <text class="event-meta">{{item.location}}</text>
        <text class="event-meta">{{item.note}}</text>
      </view>
    </block>
  </view>

  <view class="popup-mask" wx:if="{{showDetail}}" bindtap="closeDetail"></view>
  <view class="popup" wx:if="{{showDetail}}">
    <view class="popup-header">
      <text class="popup-title">{{detail.title}}</text>
      <button class="popup-edit" bindtap="onEdit">ç¼–è¾‘</button>
    </view>
    <view class="popup-row">
      <text class="icon">ğŸ•’</text>
      <text class="popup-text">{{detail.timeLabel}}</text>
    </view>
    <view class="popup-row">
      <text class="icon">ğŸ«</text>
      <text class="popup-text">{{detail.location}}</text>
    </view>
    <view class="popup-row">
      <text class="icon">ğŸ‘¤</text>
      <text class="popup-text">{{detail.teacher}}</text>
    </view>
    <view class="popup-row">
      <text class="icon">ğŸ“Œ</text>
      <text class="popup-text">{{detail.note}}</text>
    </view>
    <view class="popup-actions">
      <button class="popup-delete" bindtap="onDelete">åˆ é™¤</button>
      <button class="popup-close" bindtap="closeDetail">å…³é—­</button>
    </view>
  </view>
</view>
