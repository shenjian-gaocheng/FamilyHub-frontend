<!-- pages/schedule/statistics/statistics.wxml -->
<view class="page">
  <!-- å¤´éƒ¨ -->
  <view class="header">
    <text class="header-title">æ—¶é—´ç»Ÿè®¡</text>
    <text class="header-subtitle">æŸ¥çœ‹æ‚¨çš„ä»»åŠ¡æ—¶é—´åˆ†å¸ƒ</text>
  </view>
  
  <!-- æ—¶é—´èŒƒå›´é€‰æ‹© -->
  <view class="period-selector">
    <view 
      class="period-item {{period === item.key ? 'active' : ''}}" 
      wx:for="{{periodOptions}}" 
      wx:key="key"
      data-period="{{item.key}}"
      bindtap="onPeriodChange">
      <text>{{item.label}}</text>
    </view>
  </view>
  
  <!-- é¥¼å›¾åŒºåŸŸ -->
  <view class="chart-section">
    <view class="chart-container">
      <canvas 
        type="2d" 
        id="pieCanvas" 
        class="pie-canvas"
        style="width: 300px; height: 300px;">
      </canvas>
    </view>
    
    <!-- å›¾ä¾‹ -->
    <view class="legend">
      <view class="legend-item" wx:for="{{statistics}}" wx:key="type" wx:if="{{item.percentage > 0}}">
        <view class="legend-color" style="background: {{item.color}};"></view>
        <text class="legend-label">{{item.label}}</text>
        <text class="legend-value">{{item.percentage}}%</text>
      </view>
    </view>
  </view>
  
  <!-- è¯¦ç»†åˆ—è¡¨ -->
  <view class="detail-section">
    <view class="section-title">è¯¦ç»†ç»Ÿè®¡</view>
    <view class="detail-list">
      <view class="detail-item" wx:for="{{statistics}}" wx:key="type">
        <view class="detail-left">
          <view class="detail-color" style="background: {{item.color}};"></view>
          <text class="detail-label">{{item.label}}</text>
        </view>
        <view class="detail-right">
          <text class="detail-duration">{{item.durationText}}</text>
          <view class="detail-bar-container">
            <view class="detail-bar" style="{{ 'width:' + item.percentage + '%; background:' + item.color }}"></view>
          </view>
          <text class="detail-percentage">{{item.percentage}}%</text>
        </view>
      </view>
    </view>
  </view>
  
  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{statistics.length === 0}}">
    <text class="empty-icon">ğŸ“Š</text>
    <text class="empty-text">æš‚æ— ç»Ÿè®¡æ•°æ®</text>
    <text class="empty-hint">å¼€å§‹æ·»åŠ ä»»åŠ¡åï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºæ‚¨çš„æ—¶é—´åˆ†å¸ƒ</text>
  </view>
</view>
