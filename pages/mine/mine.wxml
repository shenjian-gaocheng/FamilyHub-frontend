<view class="container">
  <view class="user-info" wx:if="{{user}}">
    <view class="avatar">{{user.role === 'admin' ? 'ğŸ‘‘' : 'ğŸ‘¤'}}</view>
    <view class="info">
      <text class="name">{{user.name}}</text>
      <text class="email">{{user.email}}</text>
      <text class="role">{{user.role === 'admin' ? 'å®¶åº­ç®¡ç†å‘˜' : 'å®¶åº­æˆå‘˜'}}</text>
    </view>
  </view>

  <!-- å®¶åº­æˆå‘˜ç®¡ç† (ä»…ç®¡ç†å‘˜å¯è§) -->
  <view class="family-section" wx:if="{{user && user.role === 'admin'}}">
    <view class="section-header">
      <text class="section-title">å®¶åº­æˆå‘˜</text>
      <text class="add-btn" bindtap="showAddMemberForm">+ æ·»åŠ æˆå‘˜</text>
    </view>

    <view class="member-list">
      <view wx:for="{{familyMembers}}" wx:key="id" class="member-item">
        <view class="member-avatar">ğŸ‘¤</view>
        <view class="member-info">
          <text class="member-name">{{item.name}}</text>
          <text class="member-email">{{item.email}}</text>
        </view>
        <text class="member-role">{{item.role === 'admin' ? 'ç®¡ç†å‘˜' : 'æˆå‘˜'}}</text>
      </view>

      <view wx:if="{{familyMembers.length === 0}}" class="empty">
        <text>æš‚æ— å®¶åº­æˆå‘˜</text>
      </view>
    </view>
  </view>

  <!-- æ·»åŠ æˆå‘˜å¼¹çª— -->
  <view class="modal-mask" wx:if="{{showAddMember}}" bindtap="hideAddMemberForm"></view>
  <view class="modal" wx:if="{{showAddMember}}">
    <view class="modal-content" bindtap="">
      <view class="modal-title">æ·»åŠ å®¶åº­æˆå‘˜</view>

      <view class="input-group">
        <text class="label">é‚®ç®±</text>
        <view class="input-box">
          <input class="input" placeholder="è¯·è¾“å…¥æˆå‘˜é‚®ç®±" value="{{memberEmail}}" bindinput="onMemberEmail" />
        </view>
      </view>

      <view class="input-group">
        <text class="label">å¯†ç </text>
        <view class="input-box password-box">
          <input class="input" placeholder="è¯·è¾“å…¥æˆå‘˜å¯†ç " password="{{!memberShowPwd}}" value="{{memberPassword}}" bindinput="onMemberPassword" />
          <text class="eye" bindtap="toggleMemberPwd">{{memberShowPwd ? 'ğŸ™ˆ' : 'ğŸ‘ï¸'}}</text>
        </view>
      </view>

      <view class="input-group">
        <text class="label">å§“å</text>
        <view class="input-box">
          <input class="input" placeholder="è¯·è¾“å…¥æˆå‘˜å§“å" value="{{memberName}}" bindinput="onMemberName" />
        </view>
      </view>

      <view class="modal-actions">
        <button class="btn cancel" bindtap="hideAddMemberForm">å–æ¶ˆ</button>
        <button class="btn confirm" bindtap="addMember">æ·»åŠ </button>
      </view>
    </view>
  </view>

  <view class="menu-list">
    <view class="menu-item" bindtap="onLogout">
      <text class="menu-text">é€€å‡ºç™»å½•</text>
      <text class="menu-arrow">></text>
    </view>
  </view>
</view>
